# Maintainer: EndeavourOS <info@endeavouros.com>

pkgname=eos-rankmirrors
pkgver=26
pkgrel=1
pkgdesc="EndeavourOS mirror ranking tool"
arch=('any')

# url="https://github.com/endeavouros-team/PKGBUILDS/raw/master/$pkgname"
url="https://raw.githubusercontent.com/endeavouros-team/PKGBUILDS/master/$pkgname"

license=(GPL3)
depends=(eos-bash-shared parallel)
# options=(!strip !emptydirs)
backup=(etc/$pkgname.conf)

source=(
  $url/$pkgname
  $url/${pkgname}-from-hook
  $url/${pkgname}-helper

  $url/$pkgname.completion
  $url/$pkgname.conf
  $url/$pkgname.disabled
  $url/$pkgname.hook
)
sha512sums=('980052ca77105fc649fa2bbd0942b6c194c0b31c0b39718001d9afa37464d1d4db0c42d6ca2ae05f27f1f8f7d1f624a3136a3e1927ffd05a54fe95781b9645f4'
            'fc3113a20559ec58ffff2cacae8069ce5c83ad826f0054488315d024cb874a92ae9240fe4630bd9da647ee2cbf0e93dd22259190c703f26d21bf0b8481686a4c'
            '75fc57f2800e18cb1b40d6a171d38454f12b244761feeeee102f60a19298f5148cb42518b34e863338d3ff5a0724394c2f21134fce0cd0cbedc71a0cb62db5eb'
            '1363009164891e75e6ba412222e21fbb46c222f2604aaa2e2a83d2ee25343fdcf23c5158381405846d21e71778c75eb73f953afabab0f2984de2f022276f9f8a'
            '3a0443d2436e273681542f6d56b23b641000c030be2338e16e04ee8f31ae13204a079ed2b6e23fa6b5a17eeaecbfeb631724a397747ba06a42db140e75086504'
            '06b77d1109fec45071dd2a3c1be07c225a5735961bd2818d0ccea608fef6e85bf4ae71d821427aa766d5b1934195282c1964965df7bd49602316b3bab6bf9824'
            'f01f6267f624992febfec29c76f2de1c503693086ade5783e2b9cbef359f5155bf6df520ff06299193c842aef2a05cac5078977ee0dabf55cff66f44aec6e44a')

package() {
    local file
    for file in "${source[@]}" ; do
        file=${file##*/}
        case "$file" in
            *.completion)    install -Dm644 $file  $pkgdir/usr/share/bash-completion/completions/${file%.completion} ;;
            *.conf)          install -Dm644 $file  $pkgdir/etc/$file ;;
            *.disabled)      install -Dm644 $file  $pkgdir/etc/$file ;;
            *.hook)          install -Dm644 $file  $pkgdir/usr/share/libalpm/hooks/$file ;;
            *)               install -Dm755 $file  $pkgdir/usr/bin/$file ;;
        esac
    done
}
