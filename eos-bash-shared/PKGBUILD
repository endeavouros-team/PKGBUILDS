# Maintainer: EndeavourOS-Team <info@endeavouros.com>

# Disabled eos-pkginfo for now.
# Disabled eos-pkg-changelog for now.
# Moved eos-update files to a separate package.

pkgname=eos-bash-shared
pkgdesc="Bash code shared by certain EndeavourOS apps."
pkgver=26.2.1
pkgrel=1
arch=('any')
license=('GPL')
depends=(
    bash
    eos-translations
    eos-update              # backwards compatibility, to be removed from this depends array later
    eos-reboot-recommended  # backwards compatibility, to be removed from this depends array later
    expac                   # for many EOS apps
    dbus-python             # for ksetwallpaper.py
    endeavouros-branding    # for eos-wallpaper-set
    xdg-utils               # for eos-sendlog
    # yad                   # provides support for graphical dialogs
)
optdepends=(
    "xorg-xrandr: for eos-wallpaper-set (on Xfce) and ChangeDisplayResolution"
    "gnu-netcat: one of the pastebins (termbin) for eos-sendlog"
    "kde-gtk-config: to remove gtk related yad warnings"
    "libnotify: for eos-reboot-required2"
    "webkit2gtk-4.1: for eos-pacdiff to show message windows implemented with yad"
    "arch-audit: for showing only packages that have already been fixed"
    "yad: needed for some EOS apps"
    "unzip: for eos-download-wallpapers"
    "feh: used by eos-wallpaper-set on some desktops"
    "pcmanfm: used by eos-wallpaper-set on LXDE"
    "pcmanfm-qt: used by eos-wallpaper-set on LXQt"
    "kimageformats: for supporting .avif wallpapers with Plasma"
    "nano: for nano-pager"
    "swaybg: for Xfce/wayland and sway"
)

backup=(
  etc/eos-pacdiff.conf
  etc/eos-script-lib-yad.conf
  etc/eos-sendlog.conf
)

url=https://github.com/endeavouros-team/$pkgname
_url=https://raw.githubusercontent.com/endeavouros-team/$pkgname/main

source=(
  $_url/eos-script-lib-yad
  $_url/eos-script-lib-yad.conf

  $_url/eos-FindAppIcon
  $_url/RunInTerminal
  $_url/RunInTerminalOpt
  $_url/RunInTerminalEx
  https://github.com/pashazz/ksetwallpaper/raw/master/ksetwallpaper.py
  $_url/ChangeDisplayResolution
  $_url/device-info
  $_url/device-info.completion
  $_url/eos-connection-checker
  $_url/paccache-service-manager
  $_url/su-c_wrapper
  $_url/eos-run-cmd-with-su
  $_url/eos-wallpaper-set
  $_url/eos-waiting-indicator
  $_url/eos-pkg-changelog
  $_url/eos-pkg-changelog.completion
  $_url/changelogs.conf.endeavouros
  $_url/nano-pager

  $_url/eos-sendlog
  $_url/eos-sendlog-helper
  $_url/eos-sendlog.conf
  $_url/eos-kbd-set
  $_url/eos-download-wallpapers
  $_url/eos-pacdiff
  $_url/eos-pacdiff.conf
  $_url/pkg-name-components
  $_url/eos-kernel-nvidia-update-check
  $_url/eos-github2gitlab
  $_url/eos-select-file-server
  $_url/curl-exit-code-to-string
  $_url/exit-code-to-string.completion
  $_url/eos-sleep-counter
  $_url/show-location-info
  $_url/show-location-info.completion
  $_url/eos-color
  $_url/eos-color.conf
  $_url/eos-shifttime                # Thanks, @freebird54!
  $_url/grub-colour-chooser          # Thanks, @Kresimir!
)

sha512sums=('3d7e2a41acd3244dd0e9e339799efe99464659cbd9a267718a8a79f787feaf8393dc4883e5b700da931a986c82d5afecaf5e3afdc2e80798f598c8dc69cc8bd5'
            '14c15aedc818a9e0c0bc1ace7e49acfa4d8db76e1ba4b37146450776bc3f6be01d9f98ff618fab0b6f732d8516b12f0a778a4b478df0065ec7280a47424d2c1d'
            'ce6ea00a8956f930408795b678d05fe5abfa1a08167438221786c9aa091ef0c63dc107896af8faa3d37dfeed47243600b16c1191040b0c76870b2b3cbfe8c9e1'
            '0467c636eb33eafaef049de3397e6e8dca53d2a47a30bb70a83f9cb37aa128c0a0ebc3275487d06ba510d94decfe8f1c864fdcf7cb852187a86fbce3aa0f2aaa'
            '6c27a5bf1a9b54f629f27fcc75a4edb240e1df2c4122aae307f208df174a44513a9b63be3ebb0d0e563952021d9987cd46584cb229b1a4f221d97425da0df3d1'
            'a67976cb1aab264585a671c9f773bce6a033b66acdfeaac34a62f61818fabb176cb3437b9a5e42f62e6b24c2b8d9bfec850eea4d3c8f8d56804a4d43495187ed'
            'e5f57f2800602b0f45e7875811a099ba2588e0d19486dd9bf47fa71013cd7eac1add3de924689188943002ef29bea2950cb3816a19c4a3e011833914d936f64d'
            '3d5a2ded22df3111e58494714c0482f87fec92cb7a8fa7450b980854052bbc36747e5578a2f9ffd9adf029bcccbea0b26d595aad5a31cadd61d3208526fa062c'
            'c1161fb5d9f29e1a9d5f626ff2067bd1dca34f5f45ff90db352be3bd1716849da96d7c92a3d9652f8493a83c62db458ca379e79a6a7ad0d1c222dda808ccdcea'
            'fca8d4defc3ba95e2a989d3252aeee34be19954c29bd262ae6d6f5468ed658e0f4c215fa592164bd373f73fd1b450f7df0a4bc14899a8803cdae5a75b82c721e'
            'f3f0d827e049da3bfa7280caa46ac0e523b1f2a9be19192d853094a035df2e4a771bc08e3fa863925e5eee484de8511e34c5c709ef59de738a94b99d349d2d18'
            'cae41ea791ff1f971ceb52221450d6534aff5b14379247668a425add6c39e23064f07c770c3aa37f0c903ebbbf917c980db9f2fb409af0a9e5ba7cfd953d2951'
            'd8186b24a0e2165bee6b2193c42ca0ee1094cc35501138cd183595dba2df8bcc3574b49d922d5a37a9e5049365ce65cbbb241c84218de44442f78f355fe6190d'
            'db585c1ec4c73defe333b37b42c11c704a1e4ca33b56263430d7080025a31072b0f444848743719dacaefc3612aa8d5487d0d9cc0dfa6c8d0b0634132e742b85'
            'f292a0f6f39a0a9512ad1a7eaff54131b696129503519fe8f75696412ed9965b429cfb0dee5177812cadde550682e8de22a73b61c0ce01de0a47cae49a1928b3'
            '0410cd0635f2cab8a3d6ba0ecdc49bc72b0b8f7a454064a01bc1348409ffb5ae8f5c572e6c5659ba9e16062ad56c28ef87a4a784b4cb648c60aa0484f9ad2675'
            'b702a35007cdb24b65759250fc61b09417818d95fe323a66e6c0a1710705d0802e903c994fdac0e02c3c69126cee66e8f4df39788027de955588d00e22aeba6f'
            'ec018db2a2d61e46118bcd04abbab0a72313551d440e4cb52cd2b7dc8513dcd09f44aa12273f68c0855737b8a1d22c413ac4d6c51cf9f58229989703976276a1'
            'ce2af6a56223392e85165766ec9510019f8bd5e1b1de2658382895483eca2636e4e29e7c3fb8cdb12356c3e26c66140f874789787bbf563f948c3290a9a6bea9'
            '68877d5f4052d16b96fccbd87e8d8d8e92fdd6bf1ae54c52da86a8e7ba189d69a5df47f5b9c6f8de585c5c4479b40164266a53a6385c4b25259911eed5a86bdd'
            '1f6f0cdcd48e74b19ad530823e08b54fa16ce3b82cc156aff05c966726cccde9496a93006c7583941e77361b5b704d6ccf4187955313ff260386ff53f11f0139'
            'fccc2bb9e63c6323b52ae284f805ce4be5bafb9f880c06b884cbf7385d63dbf335111ea504d770c3d72ed76095557ce8487e1b825acee0ab6f7d9560ddfdc83d'
            'f2fa1a132e3971562cfc6463c4773043eacde6bc1ee521d7f330764d3ae0897c8bd8545c801e320954ebca9fc7ea59ba32b0ad93aae96a0652e2f0383c8198f7'
            '54733a3cbeee6c5ac4b91d820dd4bd6a3838906fc9954dffd6fd84ea529d0bc6f79e3b0e2ee9ee597c5137927777960a16bf5ef203d8643a3148e4071ad8cecf'
            'b6f17fe753f21954efa2cd9880f44e172e88724b79eb774359d4a83c3b929f296a63b379881938a951c2c92528b05cccefec801af7a666d8a1ac2bdf5c13770e'
            '0766e32f3e9e958b3729ffc121ed57673b00b9f017c70d821e86f11ab5fbdd27d96de1e21dc22efa78ae0f712cbfeba290c63c8c166223d9f71da0427e7edb0b'
            'f64c11a6fa77f28363a7c9166d00ced3f930aa2c8af1eb7901fcbcffab6e9a3748b937da12e4e53e3706a00b3878ce0e8d77e479d0e4f7a559c18ff00ed7924b'
            'b4301af1a68c731992d4dc3bfd33895921e20f3e8c3ace23b2fe2d180e53b6979f61bb7cdedc46a9a9c635659c4c226d9dfb0f7cc7b18f8a0cd486bf25e9b735'
            '03762c7cfb2fbd509a499c4aea1a29b0682af13090b40a65cfd00ad156886ed254262691093c115dfbe81738e970ab82dec7ed1092a45081b663e529816874a4'
            '1ca593553b87b8c2bcf5038cb1df715adefa39a0e4ad642aa2eef0d8b78c31cf458efa38de1171a1e7530254dff1a896b137501c075257bad19865102292d977'
            'a62d71bc1a750e3dc5516aefafd7e407a7d33bb9761ba21b456863cb042ff7f073375bce18426321f54e5343ac728bf117d181b9ee3e3186917b63f0b2b88b07'
            '36d4f772986b05a2d10d845d153d9a29eaee188ccba3de2c17b8b38fa51be5276ad0af597bc6f8a9e65e7a0747c4ffc4193f80308c9a0ebaaa53d723c22ea5fe'
            'a738f3e96e6ec40d09ed5381a73f34eb0d2e8c42fd2f03a22f286dc8a0967f35d7d0bc8792aeb0b8351ca32014cf04bac3fe2fc19297a8730f236516ce3b8597'
            '466138fa174b4cc0f2c2bdad7f9c8551ba17fb08ee52084ad4981ef6ae35096294444000f5705913adcca055ce07c869c5d44c2c126b0dde9ee7e6572965a61d'
            'fde9e8595c21eedf5ff69e6bdbc881dfba1d45c23500332c39074d97e0999b39044a200f4da65f800a6c380520406ad2f3a4b2e7db2fcc608787e2a7e10a8d61'
            '4cfe8139e22b76e4363111472672600c2a7882b0729caf030580ade2a5514ff3d02f09ef62a69956394ae4961eb667908d2f2114b2dd7c20398777d85765c0b1'
            '4bd5e6aa5872127ba5cf6ce2afac644fad5102ee16f1e323abda0ff1b20178d59a5057662b97e0e9e74afc9f578a1ba3d0b945b33cb560e9ee1e57222f597e84'
            '615f7a950acb386032fc52b0480655ac92903b5088569f948a2c34cfd4173ea91ffe9331c07da1f5e04f86948787e5031ee3a7dbfe3e54df4242cc6a8d2d4b8b'
            '16363f5bf8e560ec9862fb1113a8b881b2d29809e6aa553b638467168d0eccf22ead405621ca0b9d72972d69eb829618871b8374c239b6f786ea99f6706e88b6'
            'aa9e2400c53fd16668222991efa2a059a3f0ecfcb98d2210d0b8cb3546cf8d6ad2ab408793c27d8297d536605147b056bd1015533ef9de7629dda33d1aaefe8e')

package() {
  local file src

  for src in "${source[@]}" ; do
      file="${src##*/}"
      case "$file" in
          eos-script-lib-yad | ksetwallpaper.py)    install -Dm644 "$file"   "$pkgdir/usr/share/endeavouros/scripts/$file" ;;
          changelogs.conf.endeavouros)              install -Dm644 "$file"   "$pkgdir/etc/$file" ;;
          *.conf)                                   install -Dm644 "$file"   "$pkgdir/etc/$file" ;;
          *.desktop)                                install -Dm644 "$file"   "$pkgdir/usr/share/applications/$file" ;;
          *.completion)                             install -Dm644 "$file"   "$pkgdir/usr/share/bash-completion/completions/${file%.completion}" ;;
          *.hook)                                   install -Dm644 "$file"   "$pkgdir/usr/share/libalpm/hooks/$file" ;;
          *.timer | *.service)                      install -Dm644 "$file"   "$pkgdir/usr/lib/systemd/system/$file" ;;
          *)                                        install -Dm755 "$file"   "$pkgdir/usr/bin/$file" ;;
      esac
  done
}
