# Maintainer: EndeavourOS-Team <info@endeavouros.com>

pkgname=eos-update
pkgdesc="A package updater with additional features for EndeavourOS"
pkgver=25.12.3
pkgrel=1
arch=('any')
license=('GPL')
depends=(
  bash
  eos-translations
  expac
)
optdepends=(
    "yay: alternative for AUR updates in eos-update"
    "paru: alternative for AUR updates in eos-update"
    "arch-audit: for showing only packages that have already been fixed"
)

backup=(etc/eos-update-other.bash)

url="https://github.com/endeavouros-team/PKGBUILDS/raw/master/$pkgname"
_url="https://raw.githubusercontent.com/endeavouros-team/PKGBUILDS/refs/heads/master/$pkgname"


source=(
  $_url/eos-update
  $_url/eos-update.desktop
  $_url/eos-update.completion
  $_url/eos-update-descriptions
  $_url/eos-update-extras
  $_url/eos-update-fast
  $_url/eos-update-other.bash    # "config" for additional update tools
)

sha512sums=('d804fb121916bc013ffe2dd0bd552d00ec77acda8f02f12321bd08a0588ac32647a82e66bc6cac34ee68e914c2b06d80f45087326feca0991c05d049cff1ddcc'
            'c3a60ac60d50573d4d51aea7f4015f48f0f1740e5b195040131cb27edcd59baefc9c131128a22045de950b669d007917035f67b9b51dc7c34f71b4324816b6d2'
            '2e318929230800e4c75c7793811f856fc9cbaeadbadebb51ba852a10a2450dee1db1ee1071cee82bedc465f5f32646f395616f003bbb0e612270a43cd31a37f9'
            'fa0e76f45623a30995cd0b34b1c07390d1ba88b87c9304041ba12b2ca1d11fc90d19245bd24f8588d4987315bff96dd7e96e372384c03ccfe3a0bba9a3067fd6'
            '8f74252ab514d84b4ac57586838ac9582b1a14927518a3844e5b033a8b02de3e687af1e5e5e1fa13cd8b592d67847dcdb9936b85b530894ef0588fb088d2ccf3'
            '25d45e2698f4cfc46ba4f1b68053180a9292997eda7d8dbf15ab5370e9f8504634a37732076bdebfb5b7b1f109e8325a0662768cf8858f777fde8885559f7767'
            'b9f6d11909ead8bca326d61d1f25862066c82e203fab1895b67080171f0bc152dac4ba88d3470ad1a89ea29720245bd8f82638a7d21e879354617c82e60b8982')

package() {
  local file src

  for src in "${source[@]}" ; do
      file="${src##*/}"
      case "$file" in
          *.desktop)             install -Dm644 "$file"   "$pkgdir/usr/share/applications/$file" ;;
          *.completion)          install -Dm644 "$file"   "$pkgdir/usr/share/bash-completion/completions/${file%.completion}" ;;
          *.bash)                install -Dm644 "$file"   "$pkgdir/etc/$file" ;;
          *)                     install -Dm755 "$file"   "$pkgdir/usr/bin/$file" ;;
      esac
  done
}
